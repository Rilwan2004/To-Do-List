<%- include("partials/header.ejs") %>
    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous" />
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
        <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
    </head>

    <body>
        <div class="side-menu">
            <div class="offcanvas-start offcanvas-sidebar" style="width: 300px" data-bs-backdrop="false" tabindex="-1"
                id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
                <div class="header-offcanvas">
                    <h5 id="offcanvasExampleLabel">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor"
                            class="bi bi-check2-all" viewBox="0 0 16 16">
                            <path
                                d="M12.354 4.354a.5.5 0 0 0-.708-.708L5 10.293 1.854 7.146a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0zm-4.208 7-.896-.897.707-.707.543.543 6.646-6.647a.5.5 0 0 1 .708.708l-7 7a.5.5 0 0 1-.708 0" />
                            <path d="m5.354 7.146.896.897-.707.707-.897-.896a.5.5 0 1 1 .708-.708" />
                        </svg>
                    </h5>
                    <button class="toggle-close" id="toggleCloseButton" aria-controls="offcanvasExample">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-x-lg"
                            viewBox="0 0 16 16">
                            <path
                                d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z" />
                        </svg>
                    </button>
                </div>
                <div class="offcanvas-body">
                    <div class="Sidebar">
                        <hr />
                        <ul class="route-list" style="list-style-type: none">
                            <li class="today" style="background-color: #6f2cff">
                                <a href="/" class="">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                        class="bi bi-sun-fill" viewBox="0 0 16 16">
                                        <path
                                            d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708" />
                                    </svg>
                                    Today 
                                    </a>
                            </li>
                            <li class="important">
                                <a href="/important" class="">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-star-fill" viewBox="0 0 16 16">
                                        <path
                                            d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                                    </svg>
                                    Important</a>
                            </li>
                            <li class="planned">
                                <a href="/planned" class="">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                        viewBox="0 0 448 512">
                                        <!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                        <path fill="#ffffff"
                                            d="M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm64 80l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 400l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z" />
                                    </svg>
                                    Planned
                                </a>
                            </li>
                            <hr />
                            <li class="completed">
                                <a href="/completed" class=""><svg xmlns="http://www.w3.org/2000/svg" width="16"
                                        height="16" fill="currentColor" class="bi bi-check-square-fill"
                                        viewBox="0 0 16 16">
                                        <path
                                            d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm10.03 4.97a.75.75 0 0 1 .011 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.75.75 0 0 1 1.08-.022z" />
                                    </svg>
                                    Completed
                                </a>
                            </li>

                            <!-- <li class="my-tasks">
                                <a href="/" class=""> All tasks </a>
                            </li> -->
                        </ul>
                    </div>
                </div>
            </div>

            <div class="container mainContent">
                <div class="nav-bar">
                    <button class="toggle" id="toggleButton" style="background-color: whitesmoke"
                        aria-controls="offcanvasExample">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor"
                            style="background-color: whitesmoke" class="bi bi-list" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5" />
                        </svg>
                    </button>
                    <div class="route">
                        <h2>Today</h2>
                    </div>
                       
                    <% if (todayLength > 0) { %>       
                    <div class="task-length">
                        <h5><%= todayLength %></h5>    
                    </div>
                    <% } %>
                </div>
                
                <div class="body-desc">
                    <div class="modal-toggle" data-bs-toggle="modal" data-bs-target="#exampleModalCenter">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                            class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
                            <path
                                d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" />
                        </svg>
                        <input type="submit" class="modal-toggle-btn" value="Add a task" />
                    </div>
                </div>

               

                <div class="task-list">
                    <% if(locals.tasks){ %>
                        <% if (tasks.length> 0) { %>
                            <ul style="list-style-type: none">
                                <% tasks.slice().reverse().forEach(task=> { %>
                                    <li>
                                        <div class="tasks-list">
                                            <div class="main-details">
                                                <div>
                                                    <form action="/complete-task" method="post">
                                                        <input type="checkbox" class="checkbox" name="completed"
                                                            onchange="this.form.submit()" id="" />
                                                        <input type="hidden" name="task-title"
                                                            value="<%= task.title %>" />
                                                        <input type="hidden" name="task" value="<%= task.task %>" />
                                                        <input type="hidden" name="priority" id=""
                                                            value="<%= task.priority %>" />
                                                        <input type="hidden" name="type" id=""
                                                            value="<%= task.type %>" />
                                                    </form>
                                                </div>
                                                <div class="task-text">
                                                    <div class="title">
                                                        <p class="title-text">
                                                            <%= task.title %>
                                                        </p>
                                                    </div>
                                                    <div class="task">
                                                        <p class="tasks-text">
                                                            <%= task.task %>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="side-details">
                                                <div>
                                                    <%= task.type %>
                                                </div>
                                                <div>
                                                    <%= task.priority %>
                                                </div>
                                                <div>
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                        fill="#6f2cff" class="bi bi-clock-fill" viewBox="0 0 16 16">
                                                        <path
                                                            d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z" />
                                                    </svg>
                                                    <%= task.time %>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <% }); %>
                            </ul>
                            <% } %>
                                <% } else { %>
                                    <h3>Input your new task</h3>
                                    <% } %>
                </div>
            </div>
            <div class="modal fade" id="exampleModalCenter" tabindex="-1" aria-labelledby="exampleModalCenterTitle"
            aria-hidden="true" data-bs-backdrop="false">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form action="/submit" method="POST">
                            <div class="task-details">
                                <div class="title-container">
                                    <input type="text" name="task-title" class="task-title"
                                        placeholder="Task Name" />
                                </div>
                                <div class="task-container">
                                    <input type="text" name="task" class="task" placeholder="Describe the task"
                                        id="" />
                                </div>
                            </div>
                            <div class="task-options">
                                <div class="task-time">
                                    <input type="time" name="time" id="" class="time" placeholder="Time"
                                        required />
                                </div>
                                <div class="custom-select">
                                    <select name="priority" class="task-priority">
                                        <option value="p-1" style="color: red">
                                            Priority 1
                                        </option>
                                        <option value="p-2" style="color: blue">
                                            Priority 2
                                        </option>
                                        <option value="p-3" style="color: green">
                                            Priority 3
                                        </option>
                                    </select>
                                </div>
                                <select name="type" class="task-type">
                                    <option value="today">Today</option>
                                </select>
                            </div>

                            <div class="modal-footer">
                                <button type="submit" value="Add Task" class="btn" style="
                background-color: #6f2cff;
                color: white;
                padding: 10px;
              ">
                                    Add Task
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
        <script>
            var offcanvasElement = document.getElementById("offcanvasExample");
            offcanvasElement.addEventListener("shown.bs.offcanvas", function () {
                document.body.classList.add("offcanvas-open");
            });
            offcanvasElement.addEventListener("hidden.bs.offcanvas", function () {
                document.body.classList.remove("offcanvas-open");
            });

            var body = document.body;
            var toggleButton = document.getElementById("toggleButton");
            var toggleCloseButton = document.getElementById("toggleCloseButton");

            toggleButton.addEventListener("click", function () {
                body.classList.add("offcanvas-open");
            });

            toggleCloseButton.addEventListener("click", function name() {
                body.classList.remove("offcanvas-open");
            });
        </script>
    </body>

    </html>